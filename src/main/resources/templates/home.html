<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Requisições AJAX com Spring Boot + Thymeleaf</title>
  <!-- Importa Tailwind CSS e jQuery -->
  <script th:src="@{/libs/tailwindcss-4.0.8.global.js}" defer></script>
  <script th:src="@{/libs/jquery-3.7.1.min.js}" defer></script>

  <!-- Importa o arquivo JS externo com os métodos -->
  <script th:src="@{/js/userRequests.js}" defer></script>
</head>
<body class="bg-black text-white font-sans">
<div class="container mx-auto p-4">
  <!-- Cabeçalho -->
  <header class="mb-6 text-center">
    <h1 class="text-3xl font-bold text-green-400">
      CRUD de Usuário - Requisições AJAX com Spring Boot + Thymeleaf
    </h1>
  </header>

  <!-- Formulário de criação/edição de usuário -->
  <div class="mb-6 flex justify-center p-8">
    <form id="createUserForm" class="bg-gray-900 shadow p-4 rounded-lg max-w-md w-full"
          onsubmit="event.preventDefault(); saveUser();">
      <input type="hidden" id="userId" value="">
      <div class="mb-4">
        <label for="name" class="block text-green-400 font-medium">Nome:</label>
        <input type="text" id="name" placeholder="Nome"
               class="mt-1 block w-full p-3 border border-green-500 bg-black text-white rounded
                      focus:outline-none focus:ring-2 focus:ring-green-500">
      </div>
      <div class="mb-4">
        <label for="email" class="block text-green-400 font-medium">Email:</label>
        <input type="email" id="email" placeholder="Email"
               class="mt-1 block w-full p-3 border border-green-500 bg-black text-white rounded
                      focus:outline-none focus:ring-2 focus:ring-green-500">
      </div>
      <div class="flex space-x-4">
        <button type="submit" id="createUserBtn"
                class="bg-green-500 text-black px-6 py-2 rounded hover:bg-green-600 transition duration-200">
          Salvar
        </button>
        <button type="button" id="cancelEditBtn"
                class="bg-gray-700 text-white px-6 py-2 rounded hover:bg-gray-800 transition duration-200 hidden"
                onclick="resetForm()">
          Cancelar
        </button>
      </div>
    </form>
  </div>

  <!-- Campo de busca -->
  <div class="mt-6">
    <input type="text" id="search" placeholder="Buscar por nome..."
           class="w-full p-3 border border-green-500 bg-gray-900 text-white rounded shadow
                  focus:outline-none focus:ring-2 focus:ring-green-500"
           oninput="searchUsers(this.value)">
  </div>

  <!-- Tabela de usuários -->
  <div class="overflow-x-auto mt-6">
    <table class="min-w-full bg-gray-900 shadow rounded-lg overflow-hidden">
      <thead class="bg-green-500 text-black">
      <tr>
        <th class="px-4 py-2">ID</th>
        <th class="px-4 py-2">Nome</th>
        <th class="px-4 py-2">Email</th>
        <th class="px-4 py-2">Ações</th>
      </tr>
      </thead>
      <tbody id="userTableBody">
      <!-- A listagem de usuários será preenchida via JavaScript -->
      </tbody>
    </table>
    <!-- Contêiner da paginação -->
    <div id="pagination" class="flex justify-center mt-4"></div>
  </div>
</div>
</body>
</html>
